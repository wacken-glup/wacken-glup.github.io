import{P as c,D as S,E as b,G as w,_ as y,c as r,a as i,b as U,q as a,F as f,z as g,t as o,u as p,B as m,C as d,r as k,o as t}from"./index-D7dG2WEV.js";const I={data(){return{activePage:0,formSignIn:{name:"",mail:"",password:"",error:null,loading:!1},formSignUp:{name:"",mail:"",password:"",error:null,loading:!1}}},methods:{forward(){console.info("callback",this.$route.query.callback+""),this.$route.query.callback==null?window.location.href="/":window.location.href=this.$route.query.callback+""},async signIn(){this.formSignIn.loading=!0;try{await w(this.$ctx.auth,this.formSignIn.mail,this.formSignIn.password),this.forward()}catch(s){this.formSignIn.error=s.code}this.formSignIn.loading=!1},async signUp(){this.formSignUp.loading=!0;try{let s=await S(this.$ctx.auth,this.formSignUp.mail,this.formSignUp.password);await b(s.user,{displayName:this.formSignUp.name}),this.forward()}catch(s){this.formSignUp.error=s.code}this.formSignUp.loading=!1}},components:{PrivacyPolicyLink:c}},P={class:"responsive max scroll"},h={key:1,class:"middle-align",style:{height:"100%"}},V={class:"large-padding center middle-align center-align"},C={class:"large-padding"},q={class:"center-align"},D={class:"tabbed"},N={id:"mail-signin-form",onsubmit:"event.preventDefault()"},$={class:"field label prefix border"},A={class:"field label prefix border"},B={key:0,class:"error"},E={class:"right-align"},L={key:0,class:"max"},x={id:"mail-signup-form",onsubmit:"event.preventDefault()"},z={class:"field label prefix border"},F={class:"field label prefix border"},M={class:"field label prefix border"},T={key:0,class:"error"},W={class:"right-align"},G={key:0,class:"max"};function j(s,n,H,J,l,u){const v=k("PrivacyPolicyLink");return t(),r(f,null,[i("main",P,[s.$ctx.currentUser.value!=null&&s.$route.query.callback===void 0?(t(),r(f,{key:0},[g(o(s.$router.push("/login")),1)],64)):a("",!0),s.$ctx.currentUser.value==null?(t(),r("div",h,[i("article",V,[i("div",C,[n[17]||(n[17]=i("i",{class:"extra"},"mail",-1)),i("h5",q,o(s.$t("login.mail.title")),1),i("p",null,[g(o(s.$t("login.mail.message[0]")),1),n[9]||(n[9]=i("br",null,null,-1)),g(o(s.$t("login.mail.message[1]")),1)]),n[18]||(n[18]=i("div",{class:"space"},null,-1)),i("nav",D,[i("a",{class:p({active:l.activePage==0}),onClick:n[0]||(n[0]=e=>l.activePage=0)},[n[10]||(n[10]=i("i",null,"login",-1)),i("span",null,o(s.$t("common.signIn")),1)],2),i("a",{class:p({active:l.activePage==1}),onClick:n[1]||(n[1]=e=>l.activePage=1)},[n[11]||(n[11]=i("i",null,"draw",-1)),i("span",null,o(s.$t("common.signUp")),1)],2)]),n[19]||(n[19]=i("div",{class:"space"},null,-1)),n[20]||(n[20]=i("div",{class:"space"},null,-1)),i("div",{class:p(["page left center-align",{active:l.activePage==0}])},[i("form",N,[i("div",$,[n[12]||(n[12]=i("i",null,"mail",-1)),m(i("input",{type:"mail","onUpdate:modelValue":n[2]||(n[2]=e=>l.formSignIn.mail=e)},null,512),[[d,l.formSignIn.mail]]),i("label",null,o(s.$t("common.mailAddress")),1)]),i("div",A,[n[13]||(n[13]=i("i",null,"password",-1)),m(i("input",{type:"password","onUpdate:modelValue":n[3]||(n[3]=e=>l.formSignIn.password=e)},null,512),[[d,l.formSignIn.password]]),i("label",null,o(s.$t("common.password")),1)])]),l.formSignIn.error!=null?(t(),r("p",B,o(l.formSignIn.error),1)):a("",!0),i("nav",E,[i("button",{form:"mail-signin-form",onClick:n[4]||(n[4]=e=>u.signIn())},[i("span",null,o(s.$t("common.signIn")),1),l.formSignIn.loading?(t(),r("progress",L)):a("",!0)])])],2),i("div",{class:p(["page right center-align",{active:l.activePage==1}])},[i("form",x,[i("div",z,[n[14]||(n[14]=i("i",null,"label",-1)),m(i("input",{type:"name","onUpdate:modelValue":n[5]||(n[5]=e=>l.formSignUp.name=e)},null,512),[[d,l.formSignUp.name]]),i("label",null,o(s.$t("common.name")),1)]),i("div",F,[n[15]||(n[15]=i("i",null,"mail",-1)),m(i("input",{type:"mail","onUpdate:modelValue":n[6]||(n[6]=e=>l.formSignUp.mail=e)},null,512),[[d,l.formSignUp.mail]]),i("label",null,o(s.$t("common.mailAddress")),1)]),i("div",M,[n[16]||(n[16]=i("i",null,"password",-1)),m(i("input",{type:"password","onUpdate:modelValue":n[7]||(n[7]=e=>l.formSignUp.password=e)},null,512),[[d,l.formSignUp.password]]),i("label",null,o(s.$t("common.password")),1)])]),l.formSignUp.error!=null?(t(),r("p",T,o(l.formSignUp.error),1)):a("",!0),i("nav",W,[i("button",{form:"mail-signup-form",onClick:n[8]||(n[8]=e=>u.signUp())},[i("span",null,o(s.$t("common.signUp")),1),l.formSignUp.loading?(t(),r("progress",G)):a("",!0)])])],2)])])])):a("",!0)]),U(v)],64)}const O=y(I,[["render",j]]);export{O as default};
