import{x as D,l as C,_ as k,c as i,a as s,u,t as o,F as m,v as M,r as h,o as a,y as w,s as y,k as B,b,q as g,z as q}from"./index-Dd6c1HKx.js";const A={data(){return{entries:[]}},methods:{render(){var p;let e=new Map;for(let l of((p=this.$client.space)==null?void 0:p.members)||[]){for(let n of l.likes)e.set(n,(e.get(n)||0)+2);for(let n of l.suggestions)e.set(n,(e.get(n)||0)+1)}let t=[];t.push(...e.keys()),t.sort((l,n)=>(e.get(n)||0)-(e.get(l)||0)),this.entries=[];let d=0;for(let l of t)this.entries.push({index:d,entry:this.$client.container.actByUid.value.get(l)}),d++},check(){this.$route.query.dialogMemberCharts&&(async()=>{var e;for(;((e=this.$client.space)==null?void 0:e.loaded)!=!0;)await C(50);this.render()})()}},mounted(){this.check()},watch:{$route(){this.check()}},components:{ActCard:D}},N={class:"surface-container fixed",style:{padding:"0 1rem"}},I={class:"max"},V={class:"padding"};function _(e,t,d,p,l,n){const f=h("ActCard");return a(),i(m,null,[s("div",{class:u(["overlay",{active:e.$route.query.dialogMemberCharts}]),onClick:t[0]||(t[0]=c=>e.$router.back())},null,2),s("dialog",{class:u([{active:e.$route.query.dialogMemberCharts},"max-s no-padding"])},[s("header",N,[s("nav",null,[s("button",{class:"circle transparent",onClick:t[1]||(t[1]=c=>e.$router.back())},t[2]||(t[2]=[s("i",null,"close",-1)])),s("h5",I,o(e.$t("members.dialog.charts.title")),1)])]),s("div",V,[t[3]||(t[3]=s("div",{class:"space"},null,-1)),(a(!0),i(m,null,M(l.entries,c=>(a(),w(f,{model:c.entry},{default:y(()=>[s("h6",null,o(c.index+1)+".",1)]),_:2},1032,["model"]))),256))])],2)],64)}const x=k(A,[["render",_]]),z={data(){return{loaded:!1,openDeleteMemberConfirmDialog:!1,currentMember:void 0}},methods:{deleteMember(e,t=!1){if(!t){this.currentMember=e,this.openDeleteMemberConfirmDialog=!0;return}e.delete(),this.$client.space.members=this.$client.space.members.filter(d=>d.id!=e.id)},openDialog(e){this.$router.push({query:{member:e.id}})},openMemberChartsDialog(){this.$router.push({query:{dialogMemberCharts:"true",...this.$route.query}})}},mounted(){(async()=>{var e;for(;((e=this.$client.space)==null?void 0:e.loaded)!=!0;)await C(50);this.loaded=!0})()},components:{AppBar:B,RouteBasedMemberChartsDialog:x}},F={key:0,class:"responsive max scroll"},R={class:"middle-align center-align",style:{height:"100%"}},T={key:0,class:"center-align",style:{display:"flex","flex-direction":"row","flex-wrap":"wrap",gap:"24px","align-self":"safe center"}},L=["onClick"],O={style:{padding:"40px"}},S={class:"center-align"},E={class:"link small-text"},P={key:0,class:"link small-text"},U={class:"center-align"},W=["onClick"],j={class:"right-align no-space"};function G(e,t,d,p,l,n){const f=h("AppBar"),c=h("RouteBasedMemberChartsDialog");return a(),i(m,null,[b(f,{label:e.$t("navigation.members")},{prepend:y(()=>[s("button",{class:"circle transparent",onClick:t[0]||(t[0]=r=>n.openMemberChartsDialog())},t[4]||(t[4]=[s("i",null,"stars",-1)]))]),_:1},8,["label"]),l.loaded?(a(),i("main",F,[s("div",R,[e.$client.space!=null?(a(),i("div",T,[(a(!0),i(m,null,M(e.$client.space.members,r=>{var v;return a(),i("div",null,[s("article",{class:"medium middle-align wave wave-medium",onClick:$=>n.openDialog(r),style:{cursor:"pointer"}},[s("div",O,[s("i",{class:u(["extra",[`${r.color}-text`]])},"person",2),s("h5",S,o(r.name),1),s("span",E,o(e.$tc("common.likes",r.likes.length))+" "+o(e.$t("common.and"))+" "+o(e.$tc("common.recommendations",r.suggestions.length)),1),isNaN(r.calculateTasteMatch(e.$client.space.self))?g("",!0):(a(),i("span",P,[t[5]||(t[5]=s("br",null,null,-1)),q(o(e.$t("members.tasteMatch",{n:`${r.calculateTasteMatch(e.$client.space.self).toLocaleString(void 0,{maximumFractionDigits:2})}%`})),1)])),(v=e.$client.space.self)!=null&&v.isOwner()&&!r.isOwner()?(a(),i(m,{key:1},[t[7]||(t[7]=s("div",{class:"space"},null,-1)),s("nav",U,[s("button",{style:{"z-index":"10"},class:"large error",onClick:$=>{$.stopPropagation(),n.deleteMember(r)}},[t[6]||(t[6]=s("i",null,"delete",-1)),s("span",null,o(e.$t("common.delete")),1)],8,W)])],64)):g("",!0)])],8,L)])}),256))])):g("",!0)]),s("div",{class:u(["overlay",{active:l.openDeleteMemberConfirmDialog}]),onClick:t[1]||(t[1]=r=>l.openDeleteMemberConfirmDialog=!1)},null,2),s("dialog",{class:u(["error",{active:l.openDeleteMemberConfirmDialog}])},[s("h5",null,o(e.$t("members.dialog.removeMember.title")),1),s("div",null,o(e.$t("members.dialog.removeMember.message")),1),s("nav",j,[s("button",{class:"error transparent",onClick:t[2]||(t[2]=r=>l.openDeleteMemberConfirmDialog=!1)},o(e.$t("common.abort")),1),t[8]||(t[8]=s("div",{class:"space"},null,-1)),s("button",{class:"error-container no-elevate",onClick:t[3]||(t[3]=r=>{l.openDeleteMemberConfirmDialog=!1,n.deleteMember(l.currentMember,!0)})},o(e.$t("common.confirm")),1)])],2)])):g("",!0),b(c)],64)}const J=k(z,[["render",G]]);export{J as default};
